import{a as e,_ as n}from"../../tslib.es6-ee5f1b9a.js";import{jsx as t}from"react/jsx-runtime";import{c as o}from"../../index-6ea95111.js";import*as r from"react";import i,{Component as a}from"react";import{w as s,N as c}from"../../warning-e55cfeb7.js";import p from"styled-components";import{b as l,O as d,g as f,a1 as u,X as m,x as h,Z as g,aa as b,_ as v,H as x,I as w,J as y}from"../../math-3d6d0d9e.js";import{e as k}from"../../elevation-c2b1cff0.js";import{M as O,s as j,b as C,u as _,a as R,c as E}from"../../Popper-7ade2877.js";import{_ as P}from"../../objectWithoutPropertiesLoose-982ef579.js";import{_ as N,a as L}from"../../setPrototypeOf-c6ba02e6.js";import{_ as z}from"../../inheritsLoose-6fd5c6e3.js";import{Enum as D}from"../../types/enum.js";import"../../_commonjsHelpers-6e998e78.js";import"../../index-8cad2dd6.js";import"../../index-dd80248b.js";import"../../context-f854a00e.js";import"../../memoize-one.esm-8827f1ac.js";var B=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return n=e.call.apply(e,[this].concat(o))||this,N(L(n),"refHandler",(function(e){j(n.props.innerRef,e),C(n.props.setReferenceNode,e)})),n}z(n,e);var t=n.prototype;return t.componentWillUnmount=function(){j(this.props.innerRef,null)},t.render=function(){return s(Boolean(this.props.setReferenceNode),"`Reference` should not be used outside of a `Manager` component."),_(this.props.children)({ref:this.refHandler})},n}(r.Component);function H(e){return r.createElement(O.Consumer,null,(function(n){return r.createElement(B,P({setReferenceNode:n},e))}))}var I=function(e,n){return I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])},I(e,n)};var F,M,U,W="@atlaskit/inline-dialog",A=m({light:h,dark:g}),V=m({light:b,dark:v}),J=p.div(U||(F=["\n  background: ",";\n  border-radius: ","px;\n  box-sizing: content-box; /* do not set this to border-box or it will break the overflow handling */\n  color: ",";\n  max-height: ","px;\n  max-width: ","px;\n  padding: ","px ","px;\n  z-index: ",";\n\n  ",";\n\n  &:focus {\n    outline: none;\n  }\n"],M=["\n  background: ",";\n  border-radius: ","px;\n  box-sizing: content-box; /* do not set this to border-box or it will break the overflow handling */\n  color: ",";\n  max-height: ","px;\n  max-width: ","px;\n  padding: ","px ","px;\n  z-index: ",";\n\n  ",";\n\n  &:focus {\n    outline: none;\n  }\n"],Object.defineProperty?Object.defineProperty(F,"raw",{value:M}):F.raw=M,U=F),A,l,V,d(f,56),d(f,56),d(f,2),d(f,3),u.dialog,k),S=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleClickOutside=function(e){var t=n.props,o=t.isOpen,r=t.onClose;if(!e.defaultPrevented){var i=n.containerRef,a=n.triggerRef,s=e.target;a&&a.contains(s)||o&&i&&!i.contains(s)&&r&&r({isOpen:!1,event:e})}},n}return function(e,n){function t(){this.constructor=e}I(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}(n,e),n.prototype.componentDidUpdate=function(e){"undefined"!=typeof window&&(!e.isOpen&&this.props.isOpen?window.addEventListener("click",this.handleClickOutside,!0):e.isOpen&&!this.props.isOpen&&window.removeEventListener("click",this.handleClickOutside,!0))},n.prototype.componentDidMount=function(){"undefined"!=typeof window&&this.props.isOpen&&window.addEventListener("click",this.handleClickOutside,!0)},n.prototype.componentWillUnmount=function(){"undefined"!=typeof window&&window.removeEventListener("click",this.handleClickOutside,!0)},n.prototype.render=function(){var e=this,n=this.props,t=n.children,o=n.placement,r=n.isOpen,a=n.content,s=n.onContentBlur,p=n.onContentFocus,l=n.onContentClick,d=n.testId,f=r?i.createElement(R,{placement:o},(function(n){var t=n.ref,o=n.style;return i.createElement(J,{onBlur:s,onFocus:p,onClick:l,innerRef:function(n){e.containerRef=n,"function"==typeof t?t(n):t.current=n},style:o,"data-testid":d},a)})):null;return i.createElement(E,null,i.createElement(H,null,(function(n){var o=n.ref;return i.createElement(c,{innerRef:function(n){e.triggerRef=n,"function"==typeof o?o(n):o.current=n}},t)})),f)},n.defaultProps={isOpen:!1,onContentBlur:function(){},onContentClick:function(){},onContentFocus:function(){},onClose:function(){},placement:"bottom-start"},n}(a),X=y("atlaskit"),Z=x({componentName:"inlineDialog",packageName:W,packageVersion:"12.1.14"})(w({onClose:X({action:"closed",actionSubject:"inlineDialog",attributes:{componentName:"inlineDialog",packageName:W,packageVersion:"12.1.14"}})})(S)),q=D("light","dark"),G=function(r){var i=r.placement,a=void 0===i?"right":i,s=e(r,["placement"]),c=s.content,p=s.children,l=s.isOpen,d=s.type;return t("div",n({className:o("inline-popover",d)},{children:t(Z,n({},s,{isOpen:!!c&&l,placement:a,testId:o("InlinePopover",a)},{children:p}))}))};export{q as INLINE_POPOVER_TYPE,G as InlinePopover};
