import{b as e,_ as o}from"../../tslib.es6-ee5f1b9a.js";import{jsxs as t,jsx as i}from"react/jsx-runtime";import*as r from"react";import{c as n}from"../../index-6ea95111.js";import{R as s}from"../../server-a8c06485.js";import{F as p}from"../../index-f302c912.js";import{FieldLabel as a,FieldCounter as l,FieldErrorMessage as m,FieldHelperText as u}from"../Form/utility/index.js";import{InlinePopover as d}from"../Popover/InlinePopover.js";import{isForbiddenKey as c}from"../../utils/input.js";import"../../index-dd80248b.js";import"stream";import"../../objectWithoutPropertiesLoose-982ef579.js";import"../../inherits-d3723d19.js";import"../../setPrototypeOf-c6ba02e6.js";import"styled-components";import"../../objectWithoutProperties-90b89624.js";import"../../get-ae46b391.js";import"../../unsupportedIterableToArray-0ca076cc.js";import"../../index-8cad2dd6.js";import"../../context-f854a00e.js";import"../../use-memo-one.esm-19c0a4a5.js";import"../../Label-ff1ee913.js";import"../../_commonjsHelpers-6e998e78.js";import"../../core.esm-3344e74f.js";import"../../inheritsLoose-6fd5c6e3.js";import"../../unitless.esm-d94354fa.js";import"../../warning-e55cfeb7.js";import"../../noop-2d37c277.js";import"../../slicedToArray-a622878d.js";import"../../nonIterableRest-e93b6547.js";import"../../index-72b69d08.js";import"../../utils/i18n/index.js";import"../../utils/i18n/loadLanguages.js";import"../../constants/common.js";import"../../utils/typography.js";import"../../math-3d6d0d9e.js";import"../../elevation-c2b1cff0.js";import"../../Popper-7ade2877.js";import"../../memoize-one.esm-8827f1ac.js";import"../../types/enum.js";var f=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return e(t,o),t.prototype.componentWillReceiveProps=function(e,o){this.props.value===e.value||this.setState({value:e.value})},t}(p),h=function(p){function h(e){var o=p.call(this,e)||this;if(o.toolTipRef=r.createRef(),o.hideTooltip=function(){o.toolTipRef&&o.toolTipRef.current&&s.hide(o.toolTipRef.current)},o.showTooltip=function(){o.toolTipRef&&o.toolTipRef.current&&o.props.showTooltipOnFocus&&s.show(o.toolTipRef.current)},o.handleBlur=function(e){var t=o.props.onBlur;if(o.hideTooltip(),"function"==typeof t)return t(e);o.setState({isFocus:!1})},o.handleFocus=function(e){var t=o.props.onFocus;t&&t(e),o.showTooltip(),o.setState({isFocus:!0})},o.handleOnKeyDown=function(e){var t=o.props,i=t.onKeyDown,r=t.type,n=t.min,s=t.isFloat,p=e.key,a=e.ctrlKey;"number"===r&&!a&&c(p,n,s)&&e.preventDefault(),i&&i(e)},o.renderInput=function(){var e=o.props,t=e.placeholder,r=e.name,n=e.value,s=e.disabled,p=e.type,a=e.min,l=e.max,m=e.maxLength,u=e.autoComplete,d=e.onChange;return i(f,{isLabelHidden:!1,onFocus:o.handleFocus,onBlur:o.handleBlur,placeholder:t,name:r,value:n,onChange:d,disabled:s,type:p,min:a,max:l,shouldFitContainer:!0,onKeyDown:o.handleOnKeyDown,maxLength:m,autoComplete:u})},o.state={isFocus:!1},"number"===e.type&&"number"==typeof e.maxLength)throw new Error('prop maxLength cannot be used when prop type="number"');return o}return e(h,p),h.prototype.componentDidMount=function(){setTimeout((function(){s.rebuild()}),100)},h.prototype.componentWillUnmount=function(){this.hideTooltip()},h.prototype.render=function(){var e=this.props,r=e.label,s=void 0===r?"":r,p=e.value,c=e.maxLength,f=e.className,h=e.optionalLabel,j=e.errMessage,v=e.isLabelHidden,b=e.helperText,y=e.tooltip,x=e.dataQa,T=e.dataQaProps,g=e.rightIcon,F=e.validFieldTextRef,R=e.popoverContent,L=e.popoverPlacement,w=e.popoverType,I=e.customField,P=e.isRequired,C=void 0===P||P,D=e.isInvalid,N=void 0===D||D,K=this.state.isFocus;return t("div",o({className:n(f,"valid-field-text"),"data-qa-id":x,"data-qa-props":T,ref:F},{children:[t("div",o({className:n("fieldHeader",{pushRight:!s&&!C})},{children:[!v&&i(a,{label:s,optionalLabel:h,isRequired:C,tooltip:y,tooltipRef:this.toolTipRef}),!!c&&i(l,{value:p,maxLength:c,className:"px-0"})]})),t("div",o({className:n("valid-field-text-input-container",{focusedFieldText:this.state.isFocus})},{children:[R?i(d,o({isOpen:K,placement:L,content:R,type:w},{children:this.renderInput()})):this.renderInput(),!!g&&i("div",o({className:"rightIcon"},{children:g}))]})),I,N&&j&&i(m,{message:j}),b&&i(u,{message:b})]}))},h}(r.Component);export{f as Input,h as ValidFieldText};
